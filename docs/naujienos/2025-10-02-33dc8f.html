<!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="UTF-8" />
  <title>Macronas: Europoječiai „trukdys“ rusų šešėlinės flotilės laivams savo vandenyse</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Macronas: Europoječiai „trukdys“ rusų šešėlinės flotilės laivams savo vandenyse" />
  <meta property="og:title" content="Macronas: Europoječiai „trukdys“ rusų šešėlinės flotilės laivams savo vandenyse">
  <meta property="og:description" content="Macronas: Europoječiai „trukdys“ rusų šešėlinės flotilės laivams savo vandenyse">
  <meta property="og:type" content="article">
  <meta property="og:image" content="https://images.pexels.com/photos/17056389/pexels-photo-17056389.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940">
  <meta name="theme-color" content="#0b1220">

  <!-- Tailwind 2 -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

  <style>
    body{background:#0b1220;color:#e5e7eb}
    .prose-article{font-size:1.0625rem;line-height:1.85}
    @media (min-width:640px){ .prose-article{font-size:1.125rem} }
    .prose-article p{margin-bottom:1.15rem}
    .prose-article b{color:#f3f4f6}
    .prose-article h2{font-size:clamp(1.125rem,2.6vw,1.5rem);line-height:1.3;margin:1.75rem 0 .9rem;font-weight:800}
    .prose-article a{color:#93c5fd;border-bottom:1px dashed rgba(147,197,253,.5)}
    .prose-article a:hover{color:#bfdbfe;border-bottom-color:#bfdbfe}
    .prose-article blockquote{border-left:4px solid #1f2937;padding-left:.9rem;color:#d1d5db;opacity:.9}

    :root{ --pad: 1rem; }
    .bleed{ margin-left: calc(-1 * var(--pad)); margin-right: calc(-1 * var(--pad)); }

    #progressBar{position:fixed;top:0;left:0;height:3px;width:0;background:linear-gradient(90deg,#60a5fa,#22d3ee);z-index:50;transition:width .15s ease-out}

    /* Susiję – bendri stiliai */
    .rel-card{background:#0f172a;border:1px solid #1f2937;border-radius:14px;overflow:hidden;display:flex;flex-direction:column;height:100%}
    .rel-img{aspect-ratio:16/9;background:#0b1220;object-fit:cover;width:100%}
    .rel-body{padding:.75rem .9rem 1rem}
    .rel-title{font-weight:800;line-height:1.25}
    .rel-meta{display:flex;gap:.5rem;flex-wrap:wrap;margin-top:.4rem;font-size:.82rem;color:#9ca3af}
    .rel-badge{background:#111827;border:1px solid #1f2937;border-radius:999px;padding:.15rem .5rem}

    /* Mobile karuselė */
    .rel-row{display:grid;grid-auto-flow:column;grid-auto-columns:75%;gap:12px;overflow-x:auto;scroll-snap-type:x mandatory;padding-bottom:.25rem}
    .rel-row > a{scroll-snap-align:start}
    @media (min-width:768px){ .rel-row{grid-auto-columns:45%} }
    @media (min-width:1024px){ .rel-row{display:none} }

    /* Desktop aside (dešinėje) */
    .rel-aside{position:sticky;top:84px}
    .rel-list .rel-card{transition:transform .08s ease}
    .rel-list .rel-card:hover{transform:translateY(-2px)}
    .rel-list .rel-card + .rel-card{margin-top:12px}

    /* Skeletons */
    .rel-skel{background:#0f172a;border:1px solid #1f2937;border-radius:14px;overflow:hidden}
    .rel-skel .ph{height:140px;background:linear-gradient(90deg,#111827 25%,#172033 37%,#111827 63%);animation:sh 1.2s infinite}
    .rel-skel .ln{height:12px;background:#111827;margin:10px;border-radius:6px}
    @keyframes sh{0%{background-position:-200px 0}100%{background-position:calc(200px + 100%) 0}}

    .share-bar{position:sticky;bottom:0;z-index:40}
    @media (min-width:1024px){ .share-bar{display:none} }

    @media (prefers-reduced-motion: reduce){ *{animation:none!important;transition:none!important} }

    @media print{
      .no-print{display:none!important}
      body{background:#fff!important;color:#000!important}
      a{color:#000!important}
    }
  </style>
</head>
<body>
  <!-- Progreso juosta -->
  <div id="progressBar" class="no-print"></div>

  <!-- Viršutinė juosta -->
  <header class="no-print sticky top-0 z-30 backdrop-filter backdrop-blur bg-gray-900 bg-opacity-70 border-b border-gray-800">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="../zemelepai/region_map.html"
         class="inline-flex items-center space-x-2 px-3 py-2 bg-gray-800 hover:bg-gray-700 rounded-md">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
        <span>Grįžti</span>
      </a>

      <div class="flex items-center gap-2 text-xs sm:text-sm">
        <span class="inline-flex items-center px-2 py-1 rounded-full bg-blue-500 text-black font-bold">Politika</span>
        <span class="inline-flex items-center px-2 py-1 rounded-full bg-gray-800 text-gray-300 border border-gray-700">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor"><path d="M6 2a1 1 0 000 2h8a1 1 0 100-2H6z"/><path fill-rule="evenodd" d="M4 5a2 2 0 00-2 2v8a3 3 0 003 3h10a3 3 0 003-3V7a2 2 0 00-2-2H4zm6 3a1 1 0 011 1v3.586l1.293 1.293a1 1 0 01-1.414 1.414l-1.586-1.586A1 1 0 018 13V9a1 1 0 011-1h1z" clip-rule="evenodd"/></svg>
          <time datetime="2025-10-02">2025-10-02</time>
        </span>
        <span class="inline-flex items-center px-2 py-1 rounded-full bg-gray-800 text-gray-300 border border-gray-700">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor"><path d="M2 5a2 2 0 012-2h9.5A2.5 2.5 0 0116 5.5V16a2 2 0 01-2 2H4a2 2 0 01-2-2V5z"/><path d="M16 8h2v9a2 2 0 01-2 2V8z"/></svg>
          <span id="readingTime">~3 min</span>
        </span>
      </div>
    </div>
  </header>

  <!-- Maketas: straipsnis + dešinysis aside su „Susiję“ (tik ≥ lg) -->
  <div class="max-w-6xl mx-auto px-4">
    <!-- Pavadinimas + hero -->
    <section class="mt-5 sm:mt-8">
      <h1 id="pageTitle" class="text-[clamp(1.7rem,5vw,2.75rem)] font-extrabold tracking-tight mb-3 sm:mb-4">
        Macronas: Europoječiai „trukdys“ rusų šešėlinės flotilės laivams savo vandenyse
      </h1>

      
      <figure class="relative mb-2 sm:mb-6 bleed">
        <img
          src="https://images.pexels.com/photos/17056389/pexels-photo-17056389.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=650&w=940"
          alt="Straipsnio iliustracija"
          class="w-full rounded-2xl shadow-2xl object-cover"
          loading="eager" decoding="async">
        <figcaption class="text-xs text-gray-400 mt-2 px-1">Iliustracinė nuotrauka</figcaption>
      </figure>
    
    </section>

    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
      <!-- STRAIPSNIS -->
      <main class="lg:col-span-8">
        <article id="articleContent" class="prose-article text-gray-200">
          <p class='mb-6'><p>Prancūzijos valdžios institucijos rugsėjo 28 dieną sulaikė naftos tanklaivį „Pushpa“, dar vadinamą „Boracay“, kuris priklauso vadinamajai Rusijos šešėlinei flotilei ir buvo užblokuotas prie Sen Nazero uosto Atlanto vandenyno pakrantėje. Laivas, plaukiojantis po Benino vėliava, buvo sulaikytas siekiant užkirsti kelią sankcijų vengimui, o spalio 1 dieną į policijos prižiūrėjimą buvo paimti du įgulos nariai. Šis įvykis žymi naują žingsnį Europos pastangose riboti Rusijos naftos eksportą per senas ir neapdraustas transporto priemones, kurios padeda finansuoti karo veiksmus Ukrainoje.</p></p><p class='mb-6'><b>Sulaikymo aplinkybės</b></p><p class='mb-6'><p>Prancūzijos karinis laivas susekė tanklaivį „Pushpa“ aukštose jūrose ir galiausiai jį sulaikė pagal Montego įlankos konvencijos 110 straipsnį, kuris leidžia kariniams laivams areštuoti užsienio laivus tam tikromis sąlygomis. Laivas, išplaukęs iš Primorsko netoli Sankt Peterburgo rugsėjo 20 dieną, oficialiai buvo skirtas Vadinaro rafinerijai Indijoje, kuri iš dalies priklauso Rusijos naftos grupei „Rosneft“, veikiančiai nepaisydama Europos sankcijų nuo liepos mėnesio. Prancūzijos karinis laivas sekė tanklaivį kelias valandas prieš sulaikymą, tačiau karinis jūrų laivynas nepateikė tikslių sulaikymo priežasčių. Po sulaikymo rugsėjo 29 dieną buvo pradėtas teismo tyrimas, o spalio 1 dieną du įgulos nariai buvo sulaikyti policijoje. Šis veiksmas pabrėžia pastangas užkirsti kelią tokių laivų judėjimui, kurie yra naudojami sankcijų vengimui ir kartais sabotážo operacijoms.</p><p>Sulaikymas įvyko netoli Sen Nazero miesto, kur laivas buvo priverstinai sustabdytas ir laikomas inkaru. Prancūzijos prokuratūra Brėste nurodė, kad tyrimas pradėtas dėl įgulos nesugebėjimo pateikti laivo tautybės įrodymų ir atsisakymo vykdyti nurodymus. Šis precedentas yra neįprastas ir rodo griežtesnį požiūrį į Rusijos šešėlinę flotilę, kuri apima šimtus senų tanklaivių. Laivo sulaikymas taip pat siejamas su platesnėmis Europos pastangomis stebėti ir riboti naftos transportavimą, kuris padeda Rusijai apeiti Vakarų sankcijas. Tokie veiksmai yra dalis bendro konteksto, kuriame siekiama sumažinti Maskvos karo finansavimą.</p></p><p class='mb-6'><b>Laivo tapatybė ir istorija</b></p><p class='mb-6'><p>Tanklaivis „Pushpa“, dar žinomas kaip „Boracay“, plaukioja po Benino vėliava ir yra įtrauktas į Europos Sąjungos juodąjį sąrašą kaip Rusijos sankcijų vengimo šešėlinės flotilės dalis. Ši flotilė sudaryta iš 600 iki 1000 laivų, dažniausiai senesnių nei 20 metų, su neaiškia nuosavybe ir draudimu, kurie naudojami naftos eksportui apeinant Vakarų apribojimus po 2022 metų Rusijos invazijos į Ukrainą. Laivas buvo susektas naudojantis duomenis iš svetainės Marine Traffic, kuri rodo jo maršrutą iš Rusijos į Indiją. „Rosneft“ rafinerija Vadinare yra vienas iš taikinių, o laivo kelionė atitinka schemą, kaip Rusijos nafta pasiekia rinkas nepaisydama sankcijų. Šešėlinė flotilė dažnai naudojama kaip platforma ne tik transportavimui, bet ir galimoms sabotžo operacijoms.</p><p>Laivo savininkystė yra nepermatoma, o draudimas dažnai abejotinas, kas kelia riziką, susijusią su galimais naftos išsiliejimais Baltijos jūros regione. Europos Sąjunga jau įtraukė šimtus tokių senų tanklaivių į sankcijų sąrašą, siekdama sumažinti Rusijos pajamas iš naftos eksporto. „Pushpa“ buvo pastebėtas prie Danijos krantų praėjusį mėnesį, kas sukėlė susidomėjimą jo galimu vaidmeniu saugumo incidentuose. Ši flotilė yra kritikuojama dėl nepakankamo reguliavimo ir senatvės, kas didina aplinkos rizikas. Tokie laivai sudaro pagrindinį Rusijos pastangas išlaikyti naftos prekybą nepaisydama tarptautinių apribojimų.</p></p><p class='mb-6'><b>Tyrimo eiga Prancūzijoje</b></p><p class='mb-6'><p>Po sulaikymo rugsėjo 28 dieną, teismo tyrimas buvo pradėtas kitą dieną, o spalio 1 dieną du aukštesnio rango įgulos nariai buvo paimti į policijos prižiūrėjimą dėl rimtų pažeidimų. Prancūzijos prokuratūra nurodė, kad įgula nesugebėjo pateikti laivo tautybės įrodymų ir atsisakė bendradarbiauti su valdžios institucijomis. Šis tyrimas yra dalis platesnių pastangų užkirsti kelią šešėlinės flotilės veikimui, kuris padeda Rusijai finansuoti karą Ukrainoje. Prancūzijos valdžios institucijos laikosi uždaros pozicijos dėl detalių, bet pabrėžia, kad sulaikymas yra teisėtas pagal tarptautinę jūrų teisę. Tyrimas gali užtrukti, o laivas lieka inkaruotas prie Sen Nazero.</p><p>Du sulaikyti įgulos nariai, įskaitant kapitoną, susiduria su galimu teismu Prancūzijoje dėl sankcijų pažeidimų ir nesutapimo su tarptautiniais reikalavimais. Šis atvejis žymi pirmąjį tokį precedentą, kai Rusijos šešėlinės flotilės laivas yra sulaikytas Prancūzijoje. Tyrėjai tikrina laivo dokumentaciją ir maršruto duomenis, siekdami nustatyti galimus sankcijų vengimo mechanizmus. Prancūzijos veiksmai rodo griežtesnį požiūrį į tokias operacijas, kurios anksčiau buvo ribojamos tik stebėjimu. Šis tyrimas gali turėti įtakos platesniems Europos sprendimams dėl jūrų eismo reguliavimo.</p></p><p class='mb-6'><b>Galimas ryšys su Danijos incidentais</b></p><p class='mb-6'><p>Media pranešimai sieja tanklaivį „Pushpa“ su paslaptingais dronų skraidymais virš Danijos oro uostų rugsėjo mėnesį, kurie sukėlė oro eismo sutrikimus ir saugumo susirūpinimą. Laivas buvo pastebėtas prie Danijos krantų tuo metu, kai įvyko šie incidentai, o specialistai spėja, kad jis galėjo būti naudojamas kaip paleidimo platforma ar maskuotė. Prancūzijos prezidentas Emmanuelis Macronas laikėsi atsargios pozicijos, vengdamas tiesiogiai siekti šio ryšio, bet paminėjo rimtus įgulos pažeidimus. Danijos oro uostai buvo uždaryti dėl šių dronų skraidymų, kas sukėlė platesnį susidomėjimą Rusijos šešėlinės flotilės galimomis sabotžo veiklomis. Šis galimas ryšys dar nėra patvirtintas oficialiai, bet kelia klausimų dėl laivų naudojimo ne tik transportui.</p><p>Macronas Kopenhagoje vykstančioje ES lyderių susitikime pabrėžė, kad tokie tyrimai yra svarbūs siekiant sustabdyti šešėlinę flotilę, kuri gali būti naudojama įvairioms operacijoms. Media, remdamasi svetaine The Maritime Executive, nurodo, kad laivas ir kiti panašūs galėjo prisidėti prie dronų incidentų. Prancūzijos valdžios institucijos nepateikė patvirtinimo šiam ryšiui, bet tyrimas apima galimus saugumo aspektus. Šie įvykiai rodo, kad šešėlinė flotilė kelia ne tik ekonomines, bet ir saugumo grėsmes Europai. Tolimesni tyrimai gali atskleisti daugiau detalių apie šį galimą susijungimą.</p></p><p class='mb-6'><b>Europos pastangos prieš šešėlinę flotilę</b></p><p class='mb-6'><p>Prancūzija, Švedija ir Vokietija prisijungė prie Danijos, siekdamos didinti teisinį spaudimą Rusijos šešėlinei flotilei, reikalaujant draudimo dokumentų iš tanklaivių, plaukiojančių jų vandenyse ar kertančių Danijos sąsiautį. Šis biurokratinis žingsnis yra skirtas užkirsti kelią neapdraustiems laivams, kurie kelia riziką naftos išsiliejimams ir rodo nelegalias veiklas. ES sankcijos apima šimtus senų tanklaivių, siekiant sumažinti Rusijos naftos eksporto pajamas, kurios finansuoja karą Ukrainoje. Macronas ragino Europą koordinuoti veiksmus su NATO, kad būtų optimizuota bendra akcija prieš šią flotilę. Šios pastangos pabrėžia svarbą didinti spaudimą, kad būtų sumažinta Maskvos karo finansavimo galimybė.</p><p>Šešėlinė flotilė, apimanti iki 1000 laivų, dažnai turi abejotiną draudimą, kuris buvo uždraustas ES, įskaitant didelę Rusijos draudimo bendrovę. Baltijos jūros pakrantės valstybės nerimauja dėl senų laivų saugumo ir galimų sabotážų, kaip matyti iš neseniai įvykusių incidentų. Macronas Kopenhagoje sakė, kad sulaikymai, net trumpalaikiai, trikdo flotilės verslo modelį ir verčia organizuoti veiksmus kitaip. Šios koordinuotos priemonės yra dalis platesnio geopolitinio konteksto, kuriame siekiama priversti Rusiją prie derybų stalo. Tolimesni veiksmai gali apimti daugiau šalių prisijungimą prie šios iniciatyvos.</p></p>
        </article>

        <!-- Dalinimasis (desktop/tablet) -->
        <div class="hidden sm:flex flex-wrap items-center gap-2 mt-10 no-print">
          <button id="shareBtn" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-black rounded-md font-semibold">Dalintis</button>
          <button id="copyBtn" class="px-4 py-2 bg-gray-800 hover:bg-gray-700 rounded-md border border-gray-700">Nukopijuoti nuorodą</button>
          <a id="twBtn" target="_blank" rel="noopener" class="px-4 py-2 bg-blue-400 hover:bg-blue-500 text-black rounded-md font-semibold" href="#">X (Twitter)</a>
          <a id="liBtn" target="_blank" rel="noopener" class="px-4 py-2 bg-blue-300 hover:bg-blue-400 text-black rounded-md font-semibold" href="#">LinkedIn</a>
        </div>

        <!-- MOBILE: Susiję karuselė -->
        <section class="lg:hidden mt-10">
          <div class="flex items-center justify-between mb-3">
            <h3 class="text-xl font-extrabold">Susiję straipsniai</h3>
            <span class="text-xs text-gray-400">Perbraukite →</span>
          </div>
          <!-- Skeleton (mobile) -->
          <div id="relSkeletonMobile" class="grid grid-cols-1 gap-3 mb-2">
            <div class="rel-skel"><div class="ph"></div><div class="ln" style="width:80%"></div><div class="ln" style="width:60%"></div></div>
          </div>
          <div id="relRow" class="rel-row"></div>
          <p id="relEmptyMobile" class="text-gray-400 text-sm mt-2 hidden">Nerasta susijusių įrašų.</p>
        </section>
      </main>

      <!-- DESKTOP: Susiję šone (dešinėje) -->
      <aside class="hidden lg:block lg:col-span-4">
        <div class="rel-aside">
          <div class="flex items-center justify-between mb-3">
            <h3 class="text-xl font-extrabold">Susiję straipsniai</h3>
            <button id="relToggle" class="text-sm px-3 py-1 rounded border border-gray-700 bg-gray-800 hover:bg-gray-700">Rodyti daugiau</button>
          </div>

          <!-- Skeleton (desktop) -->
          <div id="relSkeletonAside" class="space-y-3">
            <div class="rel-skel"><div class="ph"></div><div class="ln" style="width:85%"></div><div class="ln" style="width:55%"></div></div>
            <div class="rel-skel"><div class="ph"></div><div class="ln" style="width:75%"></div><div class="ln" style="width:45%"></div></div>
          </div>

          <div id="relAsideList" class="rel-list"></div>
          <p id="relEmptyAside" class="text-gray-400 text-sm mt-2 hidden">Nerasta susijusių įrašų.</p>
        </div>
      </aside>
    </div>

    <div class="h-16"></div>
  </div>

  <!-- Lipni apačios dalinimosi juosta (telefonui) -->
  <div class="share-bar no-print block lg:hidden">
    <div class="mx-auto max-w-xl">
      <div class="mx-3 rounded-2xl bg-gray-900 border border-gray-800 shadow-2xl flex justify-between items-center px-3 py-2">
        <button id="mCopy" class="px-4 py-2 rounded-xl bg-blue-500 hover:bg-blue-600 text-black font-semibold flex-1 mr-2">Kopijuoti</button>
        <a id="mTw" href="#" target="_blank" rel="noopener" class="px-4 py-2 rounded-xl bg-gray-800 hover:bg-gray-700 border border-gray-700 flex-1 text-center mr-2">X</a>
        <a id="mLi" href="#" target="_blank" rel="noopener" class="px-4 py-2 rounded-xl bg-gray-800 hover:bg-gray-700 border border-gray-700 flex-1 text-center">LinkedIn</a>
      </div>
    </div>
  </div>

  <script>
    /* ===== Progreso juosta + skaitymo laikas ===== */
    const bar = document.getElementById('progressBar');
    const article = document.getElementById('articleContent');
    function onScroll(){ 
      const full = article.offsetHeight - window.innerHeight;
      const passed = Math.min(Math.max(window.scrollY - (article.offsetTop - 60), 0), full);
      const pct = full > 0 ? (passed / full) * 100 : 0;
      bar.style.width = pct + '%';
    }
    window.addEventListener('scroll', onScroll);
    window.addEventListener('load', onScroll);

    (function readingTime(){ 
      const text = article.innerText || '';
      const words = text.trim().split(/\s+/).length;
      const minutes = Math.max(1, Math.round(words / 220));
      document.getElementById('readingTime').textContent = `~${minutes} min`;
    })();

    /* ===== Dalinimasis ===== */
    const pageURL = window.location.href;
    const pageTitle = document.title;
    const encoded = encodeURIComponent(pageURL);
    const encodedTitle = encodeURIComponent(pageTitle);

    async function copyLink(btn){ 
      try{ 
        await navigator.clipboard.writeText(pageURL);
        const old = btn.textContent;
        btn.textContent = 'Nukopijuota!';
        setTimeout(()=>btn.textContent = old, 1200);
      }catch(e){ alert('Nepavyko nukopijuoti nuorodos'); }
    }
    document.getElementById('shareBtn')?.addEventListener('click', async () => { 
      if (navigator.share) { try { await navigator.share({ title: pageTitle, url: pageURL }); } catch(_) {} }
      else { alert('Dalijimosi funkcija šiame įrenginyje nepalaikoma.'); }
    });
    document.getElementById('copyBtn')?.addEventListener('click', (e)=>copyLink(e.currentTarget));
    document.getElementById('twBtn')?.setAttribute('href', `https://twitter.com/intent/tweet?url=${encoded}&text=${encodedTitle}`);
    document.getElementById('liBtn')?.setAttribute('href', `https://www.linkedin.com/sharing/share-offsite/?url=${encoded}`);
    document.getElementById('mTw').href = `https://twitter.com/intent/tweet?url=${encoded}&text=${encodedTitle}`;
    document.getElementById('mLi').href = `https://www.linkedin.com/sharing/share-offsite/?url=${encoded}`;
    document.getElementById('mCopy').onclick = (e)=>copyLink(e.currentTarget);

    /* ===== Susiję straipsniai ===== */
    const RELATED_CANDIDATES = ["../../map_data/region_map.json","../map_data/region_map.json","/map_data/region_map.json"];
    const CURRENT_NICHE  = 'Politika';

    const relRow          = document.getElementById('relRow');
    const relSkeletonMob  = document.getElementById('relSkeletonMobile');
    const relEmptyMob     = document.getElementById('relEmptyMobile');

    const relAsideList    = document.getElementById('relAsideList');
    const relSkeletonAside= document.getElementById('relSkeletonAside');
    const relEmptyAside   = document.getElementById('relEmptyAside');
    const relToggle       = document.getElementById('relToggle');

    let relAll = []; let expanded = false;

    function parseDate(d){ const dt=new Date(d); return isNaN(dt.getTime())?new Date(0):dt; }
    function fmtDate(d){ return new Date(d).toLocaleDateString('lt-LT',{year:'numeric',month:'short',day:'2-digit'}); }
    function norm(s){ return (s||'').toLowerCase().replace(/\s+/g,' ').trim(); }
    function flattenData(obj){ const out=[]; for(const country in obj){ (obj[country]||[]).forEach(a=>out.push(Object.assign({country},a))); } return out; }
    function buildCard(a){ 
      const img = a.image ? `<img class="rel-img" src="${a.image}" alt="">` : `<div class="rel-img"></div>`;
      return `
        <a class="rel-card" href="${a.url}" target="_blank" rel="noopener" aria-label="${a.title}">
          ${img}
          <div class="rel-body">
            <div class="rel-title">${a.title||'Be pavadinimo'}</div>
            <div class="rel-meta">
              <span>${fmtDate(a.date||'')}</span>
              ${a.niche?`<span class="rel-badge">${a.niche}</span>`:''}
              ${a.country?`<span class="rel-badge">${a.country}</span>`:''}
            </div>
          </div>
        </a>`;
    }
    function renderRelated(list){ 
      relRow.innerHTML = list.map(buildCard).join('');
      relAsideList.innerHTML = list.map(buildCard).join('');
    }
    function updateToggle(){ 
      if(!relToggle) return;
      relToggle.textContent = expanded ? 'Rodyti mažiau' : 'Rodyti daugiau';
    }
    relToggle?.addEventListener('click', ()=>{ 
      expanded = !expanded; updateToggle();
      const visible = expanded ? relAll : relAll.slice(0, 6);
      renderRelated(visible);
    });

    async function fetchFirst(paths){ 
      for (const p of paths){ 
        try { const r = await fetch(p); if (r.ok) return await r.json(); } catch(_){
          /* bandome kitą kelią */
        }
      }
      throw new Error('Nepavyko gauti region_map.json iš nurodytų kelių.');
    }

    async function loadRelated(){ 
      relSkeletonMob.style.display   = 'grid';
      relSkeletonAside.style.display = 'block';
      try{ 
        const data = await fetchFirst(RELATED_CANDIDATES);
        const all  = flattenData(data);
        const hereTitle = norm(document.getElementById('pageTitle')?.textContent || document.title);
        const hereUrl   = window.location.href;

        let current = all.find(a => (a.url && (hereUrl.endsWith(a.url) || a.url === hereUrl)));
        if (!current) current = all.find(a => norm(a.title) === hereTitle) || null;

        const niche = (current?.niche) || CURRENT_NICHE;
        let rel = all.filter(a => a.niche === niche && a.url !== current?.url);
        if (rel.length === 0) rel = all.filter(a => a.niche === niche);
        rel.sort((a,b)=> parseDate(b.date)-parseDate(a.date));
        if (rel.length === 0) rel = all.sort((a,b)=> parseDate(b.date)-parseDate(a.date));

        relAll = rel.slice(0, 18);
        const initial = relAll.slice(0, 6);

        relSkeletonMob.style.display   = 'none';
        relSkeletonAside.style.display = 'none';

        if (relAll.length === 0){ 
          relEmptyMob.classList.remove('hidden');
          relEmptyAside.classList.remove('hidden');
          relToggle?.style && (relToggle.style.display = 'none');
          return;
        }
        renderRelated(initial);
        updateToggle();

        const mm = window.matchMedia('(min-width:1024px)');
        mm.addEventListener?.('change', ()=>{ 
          const visible = expanded ? relAll : relAll.slice(0,6);
          renderRelated(visible);
        });

      }catch(e){ 
        relSkeletonMob.style.display   = 'none';
        relSkeletonAside.style.display = 'none';
        relEmptyMob.classList.remove('hidden');
        relEmptyAside.classList.remove('hidden');
        relToggle?.style && (relToggle.style.display = 'none');
        console.warn('Nepavyko įkelti susijusių straipsnių:', e);
      }
    }
    loadRelated();
  </script>
</body>
</html>
